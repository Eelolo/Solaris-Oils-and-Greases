<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <meta tag="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" >
    <link rel="stylesheet" href="/static/css/style.css">

    <title>Create/Update Table</title>
</head>
<body>
    {% if data %}
    {% set header = "Table Updating" %}
    {% set id = data[0] %}
    {% set table_content = data[1] %}
    {% set rows = data[2] %}
    {% set columns = data[3] %}
    {% set page_id = pages_ids.pop(pages_ids.index(data[4])) %}

    {% set submit = "Update" %}
    {% else %}
    {% set header = "Table Creation" %}
    {% set content = "" %}
    {% set page_id = pages_ids.pop(0) %}

    {% set submit = "Create" %}
    {% endif %}

    <h1>{{ header }}</h1>

    <form class="model-form" method="POST">
        <div class="form-group">
            <label>Content</label>
            <div class="table-form">
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                        {% for col in range(columns) %}
                        {% if table_content %}
                        {% set content = table_content[0][col] %}
                        {% else %}
                        {% set content = '' %}
                        {% endif %}
                            <th scope="col">
                                <textarea class="form-control" name="cell-{{ 0 }}-{{ col }}" rows="1">{{ content }}</textarea>
                            </th>
                        {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in range(1, rows) %}
                            <tr>
                            {% for col in range(columns) %}
                            {% if table_content %}
                            {% set content = table_content[row][col] %}
                            {% else %}
                            {% set content = '' %}
                            {% endif %}
                                <th scope="row">
                                    <textarea class="form-control" name="cell-{{ row }}-{{ col }}" rows="1">{{ content }}</textarea>
                                </th>
                            {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="{{ columns }}">
                                <input type="submit" class="btn btn-outline-dark" id="add-row" name="format-btn" value="Add Row">
                                <input type="submit" class="btn btn-outline-dark" id="delete-row" name="format-btn" value="Delete Row">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="{{ columns }}">
                                <input type="submit" class="btn btn-outline-dark" id="add-column" name="format-btn" value="Add Column">
                                <input type="submit" class="btn btn-outline-dark" id="delete-column" name="format-btn" value="Delete Column">
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div>
                <label for="rows">Rows</label>
                <input type="text" class="form-control" id="rows" name="rows" placeholder="Enter number of rows" value="{{ rows }}">
            </div>
            <div>
                <label for="columns">Columns</label>
                <input type="text" class="form-control" id="columns" name="columns" placeholder="Enter number of columns" value="{{ columns }}">
            </div>
            <div>
                <label for="page_id">Page id</label>
                <select class="form-control" id="page_id" name="page_select">

                    <option selected="selected">{{ page_id }}</option>
                {% for page_id in pages_ids %}
                    <option>{{ page_id }}</option>
                {% endfor %}

                </select>
            </div>
            <div class="confirm-btns">
                <input type="submit" class="btn btn-outline-dark" name="submit-btn" value="{{ submit }}">
                <input type="submit" class="btn btn-outline-dark" name="submit-btn" value="Cancel">
            </div>
        </div>
    </form>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
</body>
</html>
